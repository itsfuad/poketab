let socket=io(),e_users=[],e_avatars=[];const error=document.getElementById("error-callback"),url=window.location.href,error_code=url.substring(url.indexOf("?")+1);function check(){let allow=!1,name=$("#name").val();if(""===name)return $("#name-label").text("Name is required"),$("#name-label").css("color","red"),allow=!1,allow;allow=!0,e_users.forEach(user=>{name===user&&($("#name-label").text("Name already exists"),$("#name-label").css("color","red"),allow=!1)});let radios=document.getElementsByName("avatar"),checked=!1;for(var i=0;i<radios.length;i++)if(radios[i].checked){checked=!0;break}return checked||($("#name-label").text("Choose avatar"),$("#name-label").css("color","red")),allow&&checked}console.log(error_code),error_code!==url&&(error.innerText="*Please fill up all requirements*"),$("#next").on("click",()=>{let key=$("#key").val();if(""===key)return $("#key-label").text("Key is required"),void $("#key-label").css("color","red");socket.emit("newUserRequest",key)}),socket.on("newUserResponse",(users,avatars)=>{e_users=users,e_avatars=avatars,e_users.length>=16&&($(".form-2").html("<img src='images/sad-cry.gif' height='80px' width='80px'>Maximum user reached on the Room<br>Try a different Room Key"),$(".form-2").css({"text-align":"center",color:"red",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}),$(".form-2 img").css("border-radius","50%")),e_avatars.forEach(avatar=>{$(`label[for='${avatar}']`).hide()}),$(".form-1").hide(100),$(".form-2").show(100)}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("sw-poketab.js").then(reg=>console.log("Service Worker Registered")).catch(err=>console.log(`Service Worker: Error ${err}`))});